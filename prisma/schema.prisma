// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// ===================== SETUP =====================

generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["fullTextSearch", "fullTextIndex"]
}

datasource db {
    provider     = "mongodb"
    url          = env("DATABASE_URL")
    // It is possible we may switch to foreignKeys relationmode if stop using PlanetScale
    relationMode = "prisma"
}

// ===================== SCHEMAS =====================

model Announcement {
    // Metadata
    id         String    @id @map("_id")
    synced     DateTime  @default(now())
    created    DateTime?
    created_by String?
    updated    DateTime?
    updated_by String?
    active     Boolean   @default(true)
    glyph      String?
    public     Boolean   @default(true)

    // Main Attributes
    name    String
    title   String?
    summary String?
    from    DateTime?
    to      DateTime?
}

model HighlightMessage {
    // Metadata
    id         String    @id @map("_id")
    number          String    @unique
    synced          DateTime  @default(now())
    created         DateTime?
    created_by      String?
    updated         DateTime?
    updated_by      String?
    work_notes      String?
    work_notes_list String?
    active          Boolean   @default(true)
    state           Int?

    // Main Attributes
    message String?
}

model Forecast {
    // Metadata
    id              String    @id @map("_id") @db.ObjectId
    number          String    @unique

    synced          DateTime?  @default(now())
    created         DateTime?
    created_by      String?
    modified        DateTime?
    opened          DateTime?
    opened_by       String?
    updated         DateTime?
    updated_by      String?

    work_notes      String?
    work_notes_list String?
    active          Boolean   @default(false)
    archive         Boolean   @default(false)
    featured        Boolean   @default(false)
    state           String?

    // Flat Attributes
    anticipated_award_date                DateTime?
    anticipated_solicitation_release_date DateTime?
    co_contact                            String?
    dollar_value_with_base_option         String?
    fiscal_year                           Int?
    incumbent_contractor                  String?
    long_description                      String?
    poc_email                             String?
    poc_name                              String?
    requirement_description               String?
    target_award_quarter                  Int?
    fiscal_year_and_quarter               String?

    action_type String?
    past_competition String?
    award_type String?
    contract_vehicle String?
    estimated_value String?
    length_of_performance String?
    naics_code String?
    new_requirement String?
    office_symbol String?
    place_of_performance String?
    security_clearance String?
    past_set_aside String?
    anticipated_set_aside String?
}

model ActionType {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String  @unique
    sort_order  String 

    forecasts_action_type      Forecast[] @relation("ActionType")
    forecasts_past_competition Forecast[] @relation("PastCompetition")
}

model AwardType {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String  @unique
    sort_order  String

    forecasts Forecast[]
}

model ContractVehicle {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String  @unique
    sort_order  String

    forecasts Forecast[]
}

model EstimatedValue {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String  @unique
    sort_order  String

    forecasts Forecast[]
}

model Duration {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String  @unique
    sort_order  String

    forecasts Forecast[]
}

model NaicsCode {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String
    sort_order  String

    forecasts Forecast[]
}

model NewRequirement {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String  @unique
    sort_order String

    forecasts Forecast[]
}

model OfficeSymbol {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String  @unique
    sort_order String

    forecasts Forecast[]
}

model Location {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String  @unique
    sort_order String

    forecasts Forecast[]
}

model SecurityClearance {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String  @unique
    sort_order String

    forecasts Forecast[]
}

model SetAside {
    id     String @id @map("_id")
    synced DateTime @default(now())

    code        String  @unique
    description String  @unique
    sort_order String

    forecasts_anticipated_set_aside Forecast[] @relation("AnticipatedSetAside")
    forecasts_past_set_aside        Forecast[] @relation("PastSetAside")
}
